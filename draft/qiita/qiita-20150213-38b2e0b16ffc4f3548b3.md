---
title: "ã€Œç´™èŠå±…ã€ç”¨ã®ç°¡å˜ HTTP ã‚µãƒ¼ãƒã‚’ç«‹ã¦ã‚‹"
emoji: "ğŸ˜€"
type: "tech"
topics: [Node.js,httpd]
published: false
---
Web ã§æ–°è¦ã«ä½œã‚‹ç”»é¢ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒæ¬²ã—ã„ã¨ã„ã†ã“ã¨ã§ HTML ã§ãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒšãƒ¼ã‚¸ã‚’ä½œã£ã¦ã‚‹ã®ã§ã™ãŒã€ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥èª­ã¿è¾¼ã‚€ã®ã¯ã„ã‚ã„ã‚ã‚¢ãƒ¬ãªã®ã§ï¼‰ç°¡å˜ãª HTTP ã‚µãƒ¼ãƒãŒæ¬²ã—ã„ã€‚ã§ã‚‚æœ¬ç•ªã‚µãƒ¼ãƒã‚’ä½¿ã†ã‚ã‘ã«ã¯ã„ã‹ãªã„ã®ã§ã€ãªã‚“ã‹æ‰‹é ƒãªã®ãªã„ã‹ãªãã€ã¨æ€ã£ãŸã‚‰ [node.js] ä½¿ãˆã°ã„ã„ã‚“ã˜ã‚ƒã‚“ã€ã¨æ°—ãŒä»˜ã„ãŸã€‚

[node.js] ã§ï¼ˆHTML ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¡¨ç¤ºã™ã‚‹ã ã‘ã®ï¼‰ç°¡å˜ãª HTTP ã‚µãƒ¼ãƒã‚’ç«‹ã¦ã‚‹ã®ã«ã¯ connect ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ãˆã°ã„ã„ã®ã ãŒã€ãã®è¾ºã«è»¢ãŒã£ã¦ã‚‹æƒ…å ±ã¯ã¡ã‚‡ã£ã¨å¤ã„ã¿ãŸã„ã§ã†ã¾ãå‹•ã‹ãªã‹ã£ãŸã®ã§ã€ä»Šå¾Œã®ãŸã‚ã«ãƒ¡ãƒ¢ã—ã¦ãŠãã€‚

- [node.js - nodejs connect cannot find static - Stack Overflow](http://stackoverflow.com/questions/24346161/nodejs-connect-cannot-find-static)
- [Node.js - Connectã‚’ä½¿ã£ãŸé™çš„ãƒ•ã‚¡ã‚¤ãƒ«é…ä¿¡ã‚µãƒ¼ãƒãŒå‹•ã‹ãªããªã£ãŸ - Qiita](http://qiita.com/uchiko/items/0c052c72d8ff402c3cea)

## æº–å‚™

[node.js] ã¯ 0.12 ã® stable ãŒç™»å ´ã—ã¦ã„ã‚‹ã€‚ãŠã‚ã§ã¨ã†ï¼

- [Node v0.12.0 (Stable)](http://blog.nodejs.org/2015/02/06/node-v0-12-0-stable/)
- [2å¹´ã¶ã‚Šã®æœ€æ–°ç‰ˆã¨ãªã‚‹ã€ŒNode 0.12ã€ãŒãƒªãƒªãƒ¼ã‚¹ | SourceForge.JP Magazine](http://sourceforge.jp/magazine/15/02/10/092000)

ãã†ãã†ã€‚ä¼šç¤¾å†…ã¨ã‹ã ã¨ firewall ã«é˜»ã¾ã‚Œã¦ãŸã‚Šã™ã‚‹ã®ã§ã€ npm ã®ãƒ—ãƒ­ã‚­ã‚·è¨­å®šã‚’å¿˜ã‚Œãšã«ã€‚

- [Node.js - proxyç’°å¢ƒä¸‹ã§ã®npm configè¨­å®š - Qiita](http://qiita.com/tenten0213/items/7ca15ce8b54acc3b5719)

ã¡ãªã¿ã« `registry` ã®è¨­å®šã¯ http ã«å¤‰æ›´ã—ãªãã¦å¤§ä¸ˆå¤«ã€‚

ã§ã€ä½œæ¥­ãƒ•ã‚©ãƒ«ãƒ€ã«å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚ï¼ˆè¨€ã„å¿˜ã‚Œã¦ãŸã‘ã©ã€ä»Šå›ã¯ Windows ç’°å¢ƒã§ã™ã€‚ã¾ãã©ã‚Œã§ã‚‚é–¢ä¿‚ãªã„ã‘ã©ï¼‰

```shell
C:\prototype\html>npm install connect
connect@3.3.4 node_modules\connect
â”œâ”€â”€ utils-merge@1.0.0
â”œâ”€â”€ parseurl@1.3.0
â”œâ”€â”€ debug@2.1.1 (ms@0.6.2)
â””â”€â”€ finalhandler@0.3.3 (escape-html@1.0.1, on-finished@2.2.0)

C:\prototype\html>npm install serve-static
serve-static@1.8.1 node_modules\serve-static
â”œâ”€â”€ escape-html@1.0.1
â”œâ”€â”€ utils-merge@1.0.0
â”œâ”€â”€ parseurl@1.3.0
â””â”€â”€ send@0.11.1 (destroy@1.0.3, fresh@0.2.4, ms@0.7.0, range-parser@1.0.2, depd@1.0.0, mime@1.2.11, debug@2.1.1, on-finished@2.2.0, etag@1.5.1)
```

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æº–å‚™

ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ•ã‚©ãƒ«ãƒ€ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆä»Šå›ã¯ `app.js`ã§ã€‚åå‰ã¯ã”è‡ªç”±ã«ï¼‰ã‚’ç”¨æ„ã™ã‚‹ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨˜è¿°ã¯ã“ã‚“ãªæ„Ÿã˜ã€‚

```javascript:app.js
var connect = require('connect');
var serveStatic = require('serve-static');
var port = 3000;
connect().use(serveStatic(__dirname)).listen(port);
console.log('Server has started at http://localhost:' + port);
```

åŒã˜ãƒ•ã‚©ãƒ«ãƒ€ã«ã€å‹•ä½œç¢ºèªç”¨ã® HTML ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ç”¨æ„ã—ã¦ãŠãã€‚

```html:index.html
<!DOCTYPE html>
<html lang='ja'>
<head>
<meta charset='utf-8'>
<title>Hello World!</title>
</head>
<body>
<p>Hello World!</p>
</body>
</html>
```

ä½™è«‡ã ãŒã€`connect` ãŠã‚ˆã³ `serve-static` ã§ã¯å†…éƒ¨ã§ `Content-Type` ã®å€¤ã‚’ `text/html; charset=utf-8` ã§ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦ã„ã‚‹ã€‚ [node.js] æ¨™æº–ã®æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒ UTF-8 ãªã®ã§ã“ã‚Œã§ã„ã„ã®ã‹ã‚‚ã—ã‚Œãªã„ãŒã€ä»–ã®æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã® HTML ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ç¢ºå®Ÿã«æ–‡å­—åŒ–ã‘ã™ã‚‹ã®ã§æ³¨æ„ã™ã‚‹ã“ã¨ã€‚ãã£ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸­ã‚’å¼„ã‚Œã°ä»–ã®æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«ã‚‚å¯¾å¿œã§ãã‚‹ã ã‚ã†ã‘ã©ã€ã“ã“ã§ã¯è¸ã¿è¾¼ã¾ãªã„ã€‚ã‚¹ãƒãƒ¼ãƒˆã˜ã‚ƒãªã„ã—ã€ã©ã†ã—ã¦ã‚‚ä»–ã®æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã˜ã‚ƒãªã„ã¨ãƒ€ãƒ¡ãªå ´åˆã¯ã€ã¡ã‚ƒã‚“ã¨ã—ãŸã‚µãƒ¼ãƒã‚’ç”¨æ„ã—ãŸã»ã†ãŒã„ã„ã€‚

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•

```shell
C:\prototype\html>node app.js
Server has started at http://localhost:3000

```

ã“ã‚Œã§ç°¡å˜ HTTP ã‚µãƒ¼ãƒãŒèµ·å‹•ã—ãŸã€‚ã“ã‚Œã§ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:3000` ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚Œã° â€œHello World!â€ ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã€‚ãŠã‚ã§ã¨ã†ã€‚

ã•ã¦ä»•äº‹ã«æˆ»ã‚‰ãªã„ã¨ã€‚

[node.js]: http://nodejs.org/ "Node.js"

