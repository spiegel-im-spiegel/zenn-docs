---
title: "ã¯ã˜ã‚ã¦ã® Go è¨€èª (on Windows) ãã®8"
emoji: "ğŸ˜€"
type: "tech"
topics: [Go,godoc]
published: false
---
ï¼ˆ[ã“ã‚Œã¾ã§ã®è¨˜äº‹ã®ç›®æ¬¡](http://qiita.com/spiegel-im-spiegel/items/dca0df389df1470bdbfa#%E7%9B%AE%E6%AC%A1)ï¼‰

[å‰å›](http://qiita.com/spiegel-im-spiegel/items/64224f22ef17d916dc2d)ã®ç¶šãã€‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã—ãŸã®ãªã‚‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›¸ãã¾ã—ã‚‡ã†ã€‚

## godoc ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

godoc ã¯ Go è¨€èªã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ get ã‚³ãƒãƒ³ãƒ‰ã§å°å…¥ã§ãã¾ã™ã€‚ï¼ˆget ã‚³ãƒãƒ³ãƒ‰ã«ã¤ã„ã¦ã¯ã€Œ[ãã®3](http://qiita.com/spiegel-im-spiegel/items/a52a47942fd3946bb583)ã€ã‚’å‚ç…§ï¼‰

```shell
C:>go get -v golang.org/x/tools/cmd/godoc
Fetching https://golang.org/x/tools/cmd/godoc?go-get=1
Parsing meta tags from https://golang.org/x/tools/cmd/godoc?go-get=1 (status code 200)
get "golang.org/x/tools/cmd/godoc": found meta tag main.metaImport{Prefix:"golang.org/x/tools", VCS:"git", RepoRoot:"https://go.googlesource.com/tools"} at https://golang.org/x/tools/cmd/godoc?go-get=1
get "golang.org/x/tools/cmd/godoc": verifying non-authoritative meta tag
Fetching https://golang.org/x/tools?go-get=1
Parsing meta tags from https://golang.org/x/tools?go-get=1 (status code 200)
golang.org/x/tools (download)
golang.org/x/tools/blog/atom
golang.org/x/tools/present
golang.org/x/tools/go/ast/astutil
golang.org/x/tools/go/exact
golang.org/x/tools/go/buildutil
golang.org/x/tools/go/types
golang.org/x/tools/container/intsets
golang.org/x/tools/godoc/vfs
golang.org/x/tools/godoc/util
golang.org/x/tools/godoc/vfs/httpfs
golang.org/x/tools/blog
golang.org/x/tools/godoc/redirect
golang.org/x/tools/godoc/static
golang.org/x/tools/godoc/vfs/gatefs
golang.org/x/tools/godoc/vfs/mapfs
golang.org/x/tools/godoc/vfs/zipfs
golang.org/x/tools/playground
golang.org/x/tools/go/types/typeutil
golang.org/x/tools/go/loader
golang.org/x/tools/go/ssa
golang.org/x/tools/go/callgraph
golang.org/x/tools/go/ssa/ssautil
golang.org/x/tools/go/pointer
golang.org/x/tools/godoc/analysis
golang.org/x/tools/godoc
golang.org/x/tools/cmd/godoc
```

ã¡ãªã¿ã«å®Ÿè¡Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã® `godoc.exe` ã¯ `%GOPATH\bin` ãƒ•ã‚©ãƒ«ãƒ€ã§ã¯ãªã `%GOROOT%\bin` ãƒ•ã‚©ãƒ«ãƒ€ã«æ ¼ç´ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã§

```shell
C:>godoc time
```

ã¨ã‹ã‚„ã‚‹ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆã“ã®å ´åˆã¯ [time](http://golang.org/pkg/time/) ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼‰ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã™ãŒï¼Œã•ã™ãŒã«ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã“ã‚Œã‚’è¦‹ã‚‹ã®ã¯è¾›ã„ã®ã§ï¼Œ HTTP ã‚µãƒ¼ãƒ“ã‚¹ã‚’èµ·å‹•ã—ã¾ã™ã€‚

```shell
C:>godoc -http=":3000"
```

ã“ã‚Œã§ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:3000/ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

 ![godoc](https://c1.staticflickr.com/9/8788/18026303435_7b136c64bb.jpg "godoc")

ãŸã¨ãˆã° [time](http://golang.org/pkg/time/) ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã“ã‚“ãªãµã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

 ![godoc: time package](https://c1.staticflickr.com/9/8847/18023061102_e5474f1ddc.jpg "godoc: time package")

æœ¬å®¶ã‚µã‚¤ãƒˆã¨åŒã˜ã§ã™ã­ã€‚

### godoc ã§ modjulian ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¦‹ã¦ã¿ã‚‹

ã§ã¯ã€Œ[ãã®6](http://qiita.com/spiegel-im-spiegel/items/404871d2bafd22bdbb90)ã€ã§ä½œã£ãŸ modjulian ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ get ã—ã¦ godoc ã§è¦‹ã¦ã¿ã¾ã™ã€‚

```shell
C:>go get -v github.com/spiegel-im-spiegel/astrocalc/modjulian
github.com/spiegel-im-spiegel/astrocalc (download)
github.com/spiegel-im-spiegel/astrocalc/modjulian

C:>godoc -http=":3000"
```

 ![godoc; package list](https://c1.staticflickr.com/9/8831/18023689372_08795d4e8e.jpg "godoc; package list")


 ![godoc: modjulian package](https://c1.staticflickr.com/9/8835/17839022348_4315878c95.jpg "godoc: modjulian package")

å…¨ãã‚³ãƒ¡ãƒ³ãƒˆãŒãªã„ã®ã§ï¼Œã•ã™ãŒã«ä¸€è¦§ã«ã¯ä½•ã‚‚ãªã„ã§ã™ãŒï¼Œå€‹åˆ¥ãƒšãƒ¼ã‚¸ã«ã¯æœ€å°é™ã®æƒ…å ±ãŒè¼‰ã£ã¦ã„ã¾ã™ã€‚å‡„ã„ãªãã€‚

## modjulian ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”¨ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½è¨˜ã™ã‚‹

ã§ã¯ï¼Œã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å°‘ã—ã„ã˜ã£ã¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”¨ã®ã‚³ãƒ¼ãƒ‰ã‚’è¿½è¨˜ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```go:modjulian.go
/**
 * Astronomical calculation for Golang.
 * These codes are licensed under CC0.
 * http://creativecommons.org/publicdomain/zero/1.0/deed.ja
 */

// modjulian ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯
// ä¿®æ­£ãƒ¦ãƒªã‚¦ã‚¹æ—¥ï¼ˆModified Julian Dateï¼‰ã®è¨ˆç®—ã‚’è¡Œã„ã¾ã™ã€‚
package modjulian

import "time"

// DayNumber ã¯
// æ—¥ä»˜ã‹ã‚‰ä¿®æ­£ãƒ¦ãƒªã‚¦ã‚¹é€šæ—¥ã‚’å–å¾—ã—ã¾ã™ã€‚
//
//   t := time.Date(2015, 1, 1, 0, 0, 0, 0, time.UTC)
//   fmt.Print(modjulian.DayNumber(t)) //57023
//
// æ™‚åˆ»ï¼ˆæ™‚åˆ†ç§’ï¼‰ã¯ç„¡è¦–ã—ã¾ã™ã€‚
// 1970å¹´1æœˆ1æ—¥ä»¥å‰ã®ã‚°ãƒ¬ã‚´ãƒªã‚ªæš¦ã§ã¯ Fliegel ã®å…¬å¼ã‚’ä½¿ã£ã¦è¨ˆç®—ã—ã¾ã™ã€‚
// 1970å¹´1æœˆ1æ—¥ä»¥é™ã¯ UNIX Time ã‚’ç”¨ã„ã¦é€šæ—¥ã‚’å–å¾—ã—ã¾ã™ã€‚
func DayNumber(t time.Time) int64 {
	if t.Sub(time.Unix(0, 0)) >= 0 {
		return dnUnix(t)
	} else {
		return dnGregorian(t)
	}
}

// dnGregorian ã¯
// Fliegel ã®å…¬å¼ã‚’ä½¿ã„ï¼Œæ—¥ä»˜ã‹ã‚‰ä¿®æ­£ãƒ¦ãƒªã‚¦ã‚¹é€šæ—¥ã‚’è¨ˆç®—ã—ã¾ã™ã€‚
//
// æ™‚åˆ»ï¼ˆæ™‚åˆ†ç§’ï¼‰ã¯ç„¡è¦–ã—ã¾ã™ã€‚
func dnGregorian(t time.Time) int64 {
	y := int64(t.Year())
	m := int64(t.Month())
	if m < 3 {
		y -= 1
		m += 9
	} else {
		m -= 3
	}
	d := int64(t.Day()) - 1
	return (1461*y)/4 + y/400 - y/100 + (153*m+2)/5 + d - 678881
}

// dnUnix ã¯
// UNIX Time ã§1970å¹´1æœˆ1æ—¥ã‹ã‚‰ã®é€šæ—¥ã‚’å–å¾—ã—ï¼Œä¿®æ­£ãƒ¦ãƒªã‚¦ã‚¹é€šæ—¥ã‚’è¨ˆç®—ã—ã¾ã™ã€‚
//
// æ™‚åˆ»ï¼ˆæ™‚åˆ†ç§’ï¼‰ã¯ç„¡è¦–ã—ã¾ã™ã€‚
// 1970å¹´1æœˆ1æ—¥ä»¥å‰ã®æ—¥ä»˜ã§ã¯æ­£ã—ãè¨ˆç®—ã§ãã¾ã›ã‚“ã€‚
func dnUnix(t time.Time) int64 {
	const (
		onday   = int64(86400) //seconds
		baseDay = int64(40587) //Modified Julian Date at January 1, 1970
	)
	return (t.Unix())/onday + baseDay
}
```

 ![godoc; package list 2](https://c4.staticflickr.com/8/7732/18002607746_9990483503.jpg "godoc; package list 2")


 ![godoc: modjulian package 2](https://c1.staticflickr.com/9/8897/17408544863_f0f5649e32.jpg "godoc: modjulian package 2")

æ—¥æœ¬èªã§ã™ã¿ã¾ã›ã‚“ã€‚è‹±èªä¸å¾—æ‰‹ãªã‚‚ã®ã§ã€‚

1. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒ¡ãƒ³ãƒˆã¯ `package` æŒ‡å®šã®ç›´å‰ã®ã‚³ãƒ¡ãƒ³ãƒˆãŒæœ‰åŠ¹ã«ãªã‚‹ã€‚ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«å…ˆé ­ã®ã‚³ãƒ¡ãƒ³ãƒˆã¯åæ˜ ã•ã‚Œãªã„ï¼‰
1. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒªã‚¹ãƒˆã®èª¬æ˜ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆã®æœ€åˆã®1æ–‡ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆæ—¥æœ¬èªã®å¥èª­ç‚¹ã‚‚ç†è§£ã—ã¦ã„ã‚‹ã‚‰ã—ã„ï¼‰
1. é–¢æ•°ç­‰ã®ã‚³ãƒ¡ãƒ³ãƒˆã¯ãã‚Œãã‚Œã®è¨˜è¿°ã®ç›´å‰ã®ã‚³ãƒ¡ãƒ³ãƒˆãŒæœ‰åŠ¹ã«ãªã‚‹ã€‚
1. åŸºæœ¬çš„ã«æ”¹è¡Œã¯ç„¡è¦–ã•ã‚Œã‚‹ã€‚ãŸã ã—ç©ºè¡ŒãŒã‚ã‚Œã°åˆ¥ã®ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ã¨ç†è§£ã—ã¦ã„ã‚‹ã‚ˆã†ã ã€‚
1. ç©ºç™½æ–‡å­—2æ–‡å­—ã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã§ã‚³ãƒ¼ãƒ‰è¨˜è¿°é ˜åŸŸï¼ˆHTML çš„ã«ã¯ `<pre>` è¦ç´ ï¼‰ã¨ã¿ãªã—ã¦ã„ã‚‹ã‚‰ã—ã„ã€‚ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãå¿…è¦ã¯ãªã„ã‘ã©ã€‚

ä¸Šã®ä¾‹ã§ã¯èª¬æ˜ã®ãŸã‚ã«ã‚³ãƒ¡ãƒ³ãƒˆå†…ã«ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’è¼‰ã›ã¾ã—ãŸãŒï¼Œã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã™ã‚‹ã®ã§ã‚ã‚Œã°ã‚‚ã£ã¨ã‚¹ãƒãƒ¼ãƒˆãªæ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œã¯ãƒ†ã‚¹ãƒˆã«ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’å«ã‚ã‚‹æ–¹æ³•ã§ã™ã€‚

```go:example_test.go
package modjulian_test

import (
	"fmt"
	"github.com/spiegel-im-spiegel/astrocalc/modjulian"
	"time"
)

func ExampleDayNumber() {
	t := time.Date(2015, 1, 1, 0, 0, 0, 0, time.UTC)
	fmt.Print(modjulian.DayNumber(t))
	// Output:
	// 57023
}
```

ã“ã®ã‚ˆã†ãªãƒ†ã‚¹ãƒˆã‚’ä½œã‚‹ã¨ï¼Œãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

 ![godoc: modjulian package 3](https://c2.staticflickr.com/6/5327/17843944479_024f2f4073.jpg "godoc: modjulian package 3")

ã‚‚ã¡ã‚ã‚“ï¼Œãƒ†ã‚¹ãƒˆã‚‚ã§ãã¾ã™ã€‚

```shell
C:>go test -v ./...
=== RUN TestDayNumber
--- PASS: TestDayNumber (0.00s)
=== RUN: ExampleDayNumber
--- PASS: ExampleDayNumber (0.00s)
PASS
ok      github.com/spiegel-im-spiegel/astrocalc/modjulian       2.038s
```

ã“ã®ä»•çµ„ã¿ã‚’ä½¿ãˆã°ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’å¸¸ã«æœ€æ–°ã®ä»•æ§˜ã«ãƒãƒƒãƒã•ã›ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒã«ã¨ã£ã¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ä¸€ç•ªæ¬²ã—ã„ã®ã¯ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãªã®ã§ï¼Œã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã•ãˆæ­£ã—ã‘ã‚Œã°ï¼Œä»–ã¯ãã‚Œã»ã©è©³ç´°ã«æ›¸ã‹ãªãã¦ã‚‚æ¨æ¸¬ã§ãã¾ã™ã€‚ãã†ã„ã†æ„å‘³ã§ï¼Œã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã¯ãªã‹ãªã‹ãŠã‚‚ã—ã‚ã„ã¨æ€ã„ã¾ã™ã€‚

## ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯

- [Go ã§ godoc ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã€œgodoc ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€œ - Qiita](http://qiita.com/megu_ma/items/2066aef2f8c7f0ce2cc3)
- [Goè¨€èªã®ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ | SOTA](http://deeeet.com/writing/2014/05/26/go-code-review/)
- [Go ã‚³ãƒ¼ãƒ‰ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚ã«ã‚ˆãã•ã‚Œã‚‹ã‚³ãƒ¡ãƒ³ãƒˆ - build error](http://papaeye.tumblr.com/post/92328649161/go)
- [testingãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®Examplesã«ã¤ã„ã¦ - taknb2nchã®ãƒ¡ãƒ¢](http://d.hatena.ne.jp/taknb2nch/20131101/1383285018)
- [Goã®Exampleãƒ†ã‚¹ãƒˆãŒä¾¿åˆ© : swdyh](http://swdyh.tumblr.com/post/55771477125/go-example)
- [godoc.org ã¸ã®æ²è¼‰æ–¹æ³•ã‚’èª¿ã¹ãŸ - taknb2nchã®ãƒ¡ãƒ¢](http://d.hatena.ne.jp/taknb2nch/20140225/1393302743)

