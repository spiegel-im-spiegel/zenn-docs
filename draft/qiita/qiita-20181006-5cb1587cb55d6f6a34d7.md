---
title: "GOPATH ãƒ¢ãƒ¼ãƒ‰ã‹ã‚‰ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ¢ãƒ¼ãƒ‰ã¸ç§»è¡Œã›ã‚ˆ"
emoji: "ğŸ˜€"
type: "tech"
topics: [Go]
published: false
---
[Go è¨€èª]ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.11 ã‹ã‚‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ãã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã‚’ä¸€æ‹¬ç®¡ç†ã§ãã‚‹ã€Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ¢ãƒ¼ãƒ‰ï¼ˆmodule-aware modeï¼‰ã€ãŒçµ„ã¿è¾¼ã¾ã‚ŒãŸã€‚ 1.11 ã§ã¯ preliminary support ã ãŒï¼Œ2019å¹´2æœˆé ƒã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã‚‹ 1.12 ä»¥é™ã§æ­£å¼ãªã‚µãƒãƒ¼ãƒˆã«ãªã‚‹äºˆå®šã§ã‚ã‚‹ï¼ˆäºˆå®šã¯æœªå®šï¼‰ã€‚

ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ¢ãƒ¼ãƒ‰ã®åˆ©ç‚¹ã¯ä»¥ä¸‹ã®2ã¤ã§ã‚ã‚ã†ã€‚

1. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ãã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã‚’ä¸€æ‹¬ç®¡ç†ã§ãã‚‹
2. ã€Œ[GOPATH æ±šæŸ“å•é¡Œ](http://text.baldanders.info/golang/gopath-pollution/ "GOPATH æ±šæŸ“å•é¡Œ â€” ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª Go | text.Baldanders.info")ã€ã®è§£æ¶ˆ

ç‰¹ã«2ç•ªç›®ãŒé‡è¦ã ã‚ã†ã€‚ç§é”ã¯ã‚ˆã†ã‚„ã GOPATH ã®å‘ªã„ã‹ã‚‰è§£æ”¾ã•ã‚Œã‚‹ã®ã§ã‚ã‚‹ï¼ˆç¬‘ï¼‰

1ç•ªç›®ã«ã¤ã„ã¦ã¯ [dep] ãªã©ã®å¤–éƒ¨ãƒ„ãƒ¼ãƒ«ã§ã‚‚å¯¾å¿œå¯èƒ½ã ãŒï¼Œã‚„ã¯ã‚Šå…¬å¼ã«ã‚µãƒãƒ¼ãƒˆã•ã‚ŒãŸã¨ã„ã†ã®ã¯å¤§ãã„ã€‚

ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ¢ãƒ¼ãƒ‰ã§ã®å„ç¨®æ“ä½œã¯ä¸»ã« `go mod` ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè£…ã•ã‚Œã‚‹ã€‚

```
$ go help mod
Go mod provides access to operations on modules.

Note that support for modules is built into all the go commands,
not just 'go mod'. For example, day-to-day adding, removing, upgrading,
and downgrading of dependencies should be done using 'go get'.
See 'go help modules' for an overview of module functionality.

Usage:

        go mod <command> [arguments]

The commands are:

        download    download modules to local cache
        edit        edit go.mod from tools or scripts
        graph       print module requirement graph
        init        initialize new module in current directory
        tidy        add missing and remove unused modules
        vendor      make vendored copy of dependencies
        verify      verify dependencies have expected content
        why         explain why packages or modules are needed

Use "go help mod <command>" for more information about a command.
```

ä»¥é™ã‹ã‚‰ï¼Œç°¡å˜ãªä¾‹ã‚’äº¤ãˆã¦ï¼Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ¢ãƒ¼ãƒ‰ã«ã¤ã„ã¦è§£èª¬ã—ã¦ã¿ã‚‹ã€‚

## ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ¢ãƒ¼ãƒ‰

â€œ[A Tour of Versioned Go (vgo)](https://research.swtch.com/vgo-tour)â€ ã‚’å‚è€ƒã«ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã‚‹ã€‚ãƒ•ã‚¡ã‚¤ãƒ«åã¯ `hello.go` ã¨ã§ã‚‚ã—ã¦ãŠã“ã†ã€‚

```go:hello.go
package main

import (
    "fmt"

    "rsc.io/quote"
)

func main() {
    fmt.Println(quote.Hello())
}
```

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»»æ„ã®å ´æ‰€ã«ç½®ãï¼ˆã‚³ã‚³é‡è¦ï¼‰ã€‚ã‚‚ã—å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ `rsc.io/quote` ãŒ GOPATH é…ä¸‹ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã‘ã‚Œã°ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã« â€œ`cannot find package "rsc.io/quote"`â€ ã¨æ€’ã‚‰ã‚Œã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚ã“ã“ã¾ã§ã¯å¾“æ¥ã©ãŠã‚Šã®å‹•ä½œã€‚

ã“ã“ã§ `hello.go` ã®ã‚³ãƒ¼ãƒ‰ã‚’ `hello` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦å®šç¾©ã™ã‚‹ã€‚ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®šç¾©ã¯ï¼Œã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ã¯ãªãï¼Œ `go.mod` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°ãŸã«ä½œæˆã™ã‚‹ã€‚

`hello.go` ã®ã‚ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ä¸Šã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚

```
$ go mod init hello
go: creating new go.mod: module hello
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã§ä½œæˆã—ãŸ `go.mod` ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã‚’è¦‹ã¦ã¿ã‚ˆã†ã€‚ä¸­èº«ã¯ãƒ†ã‚­ã‚¹ãƒˆã§1è¡Œã ã‘

```text:go.mod
module hello
```

ã¨è¨˜ã•ã‚Œã¦ã„ã‚‹ã€‚ã“ã‚Œã§ `hello.go` ã®ã‚³ãƒ¼ãƒ‰ã¯ `hello` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦å®šç¾©ã•ã‚ŒãŸã€‚

ã“ã®çŠ¶æ…‹ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«&å®Ÿè¡Œã—ã¦ã¿ã‚ˆã†ã€‚

```
$ go run hello.go
go: finding rsc.io/quote v1.5.2
go: downloading rsc.io/quote v1.5.2
go: finding rsc.io/sampler v1.3.0
go: finding golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c
go: downloading rsc.io/sampler v1.3.0
go: downloading golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c
Hello, world.
```

`rsc.io/quote` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒä¾å­˜ã™ã‚‹ä»–ã®å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œï¼Œã‚³ãƒ³ãƒ‘ã‚¤ãƒ«&å®Ÿè¡ŒãŒæˆåŠŸã—ã¦ã„ã‚‹ã®ãŒåˆ†ã‹ã‚‹ã¨æ€ã†ã€‚ãªãŠï¼Œã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã« `go.mod` ãƒ•ã‚¡ã‚¤ãƒ«ãŒä»¥ä¸‹ã®å†…å®¹ã«æ›¸ãæ›ãˆã‚‰ã‚Œã‚‹ã€‚

```text:go.mod
module hello

require rsc.io/quote v1.5.2 // indirect
```

ä¾å­˜é–¢ä¿‚ã‚’è¦‹ã¦ã¿ã‚‹ã¨

```
$ go mod graph
hello rsc.io/quote@v1.5.2
rsc.io/quote@v1.5.2 rsc.io/sampler@v1.3.0
rsc.io/sampler@v1.3.0 golang.org/x/text@v0.0.0-20170915032832-14c0d48ead0c
```

hello â†’ rsc.io/quote â†’ rsc.io/sampler â†’ golang.org/x/text ã¨ä¾å­˜é–¢ä¿‚ã‚’æ˜ã‚Šä¸‹ã’ã¦ã„ã£ã¦ã„ã‚‹ã®ãŒåˆ†ã‹ã‚‹ã ã‚ã†ã€‚

å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å®Ÿä½“ã¯ `$GOPATH/mod` ãƒ•ã‚©ãƒ«ãƒ€ä»¥ä¸‹ã«æ ¼ç´ã•ã‚Œã‚‹ã€‚ãŸã¨ãˆã° `rsc.io/quote` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã® v1.5.2 ã®ã‚³ãƒ¼ãƒ‰ã¯ `$GOPATH/mod/rsc.io/quote@v1.5.2` ã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã€‚

`rsc.io/quote@v1.5.2` ãƒ•ã‚©ãƒ«ãƒ€ã‚’è¦‹ãŠã‚‹ã¨ `go.mod` ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã®ãŒåˆ†ã‹ã‚‹ã€‚ä¸­èº«ã‚’è¦‹ã¦ã¿ã‚‹ã¨

```text:go.mod
module "rsc.io/quote"

require "rsc.io/sampler" v1.3.0
```

ã¨è¨˜ã•ã‚Œã¦ã„ã‚‹ã€‚ã•ã‚‰ã« `rsc.io/sampler@v1.3.0` ãƒ•ã‚©ãƒ«ãƒ€ã® `go.mod` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã‚‹ã¨

```text:go.mod
module "rsc.io/sampler"

require "golang.org/x/text" v0.0.0-20170915032832-14c0d48ead0c
```

ã¨ãªã£ã¦ã„ã‚‹ã€‚

ã“ã®ã‚ˆã†ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã”ã¨ã« `go.mod` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ã§ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å«ã‚ãŸï¼‰ä¾å­˜é–¢ä¿‚ã‚’éšå±¤çš„ã«æ§‹ç¯‰ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚

ã‚„ã£ãŸã­ï¼

### dep ã‹ã‚‰ã®ç§»è¡Œ

[dep] ã‚’ä½¿ã£ã¦å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç®¡ç†ã—ã¦ã„ã‚‹å ´åˆã¯ `go mod init` ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã« `Gopkg.lock` ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’è‡ªå‹•çš„ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã€‚

```
$ go mod init github.com/spiegel-im-spiegel/gpgpdump
go: creating new go.mod: module github.com/spiegel-im-spiegel/gpgpdump
go: copying requirements from Gopkg.lock
```

å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ç¢ºèªã™ã‚‹ã«ã¯ `go list -m -u all` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚

```text
$ go list -m -u all
go: finding github.com/pkg/errors v0.8.0
go: finding github.com/spf13/pflag v1.0.2
go: finding github.com/spf13/cobra v0.0.3
go: finding github.com/BurntSushi/toml v0.3.0
go: finding github.com/spiegel-im-spiegel/gocli v0.8.0
go: finding github.com/inconshreveable/mousetrap v1.0.0
go: finding golang.org/x/crypto v0.0.0-20180816225734-aabede6cba87
go: finding golang.org/x/crypto latest
go: finding github.com/BurntSushi/toml v0.3.1
github.com/spiegel-im-spiegel/gpgpdump
github.com/BurntSushi/toml v0.3.0 [v0.3.1]
github.com/inconshreveable/mousetrap v1.0.0
github.com/pkg/errors v0.8.0
github.com/spf13/cobra v0.0.3
github.com/spf13/pflag v1.0.2
github.com/spiegel-im-spiegel/gocli v0.8.0
golang.org/x/crypto v0.0.0-20180816225734-aabede6cba87 [v0.0.0-20180910181607-0e37d006457b]
```

å®Ÿè¡Œçµæœã‚’è¦‹ã‚‹ã¨ `github.com/BurntSushi/toml` ã¨ `golang.org/x/crypto` ã®å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚

## Semantic Versioning

ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ¢ãƒ¼ãƒ‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã¯ [Semantic Versioning] ã‚’ãƒ™ãƒ¼ã‚¹ã«ä»¥ä¸‹ã®ã‚ˆã†ãªè€ƒãˆæ–¹ã«ãªã£ã¦ã„ã‚‹ã‚ˆã†ã ã€‚

![Semantic Versioning](https://research.swtch.com/impver.png)

ãªãŠ `go.mod` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã¾ãªã„å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ v2 ä»¥é™ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¿ã‚°ãŒä»˜ã„ã¦ã„ã‚‹ã‚‚ã®ã«ã¤ã„ã¦ã¯ï¼Œè‡ªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã® `go.mod` ãƒ•ã‚¡ã‚¤ãƒ«ã«

```text:go.mod
require github.com/lestrrat-go/file-rotatelogs v2.2.0+incompatible
```

ã®ã‚ˆã†ã« â€œ`+incompatible`â€ ãŒä»˜åŠ ã•ã‚Œã‚‹ã€‚ãŸã ã—ä¸Šã®å›³ã®ã‚ˆã†ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ†ã‘ãŸã‚Šãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ã«ãƒ–ãƒ©ãƒ³ãƒã‚’åˆ‡ã‚‹ãªã©ã™ã‚Œã°å•é¡Œãªã„ã‚ˆã†ã ã€‚

ãƒªãƒã‚¸ãƒˆãƒªã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ»ã‚¿ã‚°ãŒåˆ‡ã‚‰ã‚Œã¦ãªã„å ´åˆã¯

```text:go.mod
require golang.org/x/sys v0.0.0-20181004145325-8469e314837c
```

ã®ã‚ˆã†ã«æ—¥ä»˜ã¨ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã‚’å«ã‚€ä»®ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã‚’ä½¿ã†ã€‚ã¨ã«ã‹ãæœ€æ–°ç‰ˆã‚’æŒ‡å®šã™ã‚‹ã®ã§ã‚ã‚Œã°

```text:go.mod
require golang.org/x/sys latest
```

ã®ã‚ˆã†ã« `latest` ã‚’æŒ‡å®šã™ã‚‹ã€‚`latest` è¨˜è¿°ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ç­‰ã‚’è¡Œã†éš›ã«å®Ÿéš›ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã«æ›¸ãæ›ãˆã‚‰ã‚Œã‚‹ã€‚

## ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ»ãƒ‘ã‚¹ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ»ãƒ‘ã‚¹

`go.mod` ãƒ•ã‚¡ã‚¤ãƒ«ã§å®šç¾©ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ»ãƒ‘ã‚¹ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ»ãƒ‘ã‚¹ã¯åˆã‚ã›ã¦ãŠãã»ã†ãŒã‚ˆã„ã€‚ãŸã¨ãˆã°ï¼Œå…ˆç¨‹ã® `hello.go` ã‚’ãƒªãƒã‚¸ãƒˆãƒª `https://github.com/you/hello` ã«ç½®ãã®ã§ã‚ã‚Œã°ï¼Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ»ãƒ‘ã‚¹ã‚’

```text:go.mod
module github.com/you/hello
```

ã¨ã—ã¦ãŠã‘ã°ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒè‡ªå‹•çš„ã«ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã‚Œã‚‹ã€‚

### gopkg.in/russross/blackfriday.v2 ã®å ´åˆ

ç‰¹æ®Šãªä¾‹ã ãŒ `gopkg.in/russross/blackfriday.v2` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä¾‹ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ»ãƒ‘ã‚¹ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ»ãƒ‘ã‚¹ãŒä¸€è‡´ã—ãªã„å ´åˆã®å¯¾å¿œã‚’ç´¹ä»‹ã™ã‚‹ã€‚

ï¼ˆã¡ãªã¿ã« `gopkg.in/russross/blackfriday.v2` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ Markdown ã‚³ãƒ¼ãƒ‰ã‚’ HTML ç­‰ã®æ›¸å¼ã«å¤‰æ›ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚ã‚‹ã€‚å‚è€ƒï¼š[Markdown ãƒ‘ãƒ¼ã‚µ blackfriday.v2 ã§éŠã¶](http://text.baldanders.info/golang/using-blackfriday-v2/ "Markdown ãƒ‘ãƒ¼ã‚µ blackfriday.v2 ã§éŠã¶ â€” ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª Go | text.Baldanders.info")ï¼‰

ã¾ãšä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã€‚ãƒ•ã‚¡ã‚¤ãƒ«åã¯ `md2html.go` ã¨ã§ã‚‚ã—ã¦ãŠã“ã†ã€‚

```go:md2html.go
package main

import (
	"fmt"
	"io/ioutil"
	"os"

	"gopkg.in/russross/blackfriday.v2"
)

func main() {
	md, err := ioutil.ReadFile(os.Args[1])
	if err != nil {
		fmt.Fprintln(os.Stderr, err)
		return
	}

	html := blackfriday.Run(md)
	fmt.Println(string(html))
}
```

`md2html.go` ã«å¯¾ã—ã¦ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®šç¾©ã‚’è¡Œã†ã€‚

```text:go.mod
module md2html

require gopkg.in/russross/blackfriday.v2 latest
```

ã§ã¯å®Ÿéš›ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«&å®Ÿè¡Œã—ã¦ã¿ã‚ˆã†ã€‚

```
$ go run md2html.go hello.md
go: finding gopkg.in/russross/blackfriday.v2 v2.0.1
go: gopkg.in/russross/blackfriday.v2@v2.0.1: go.mod has non-....v2 module path "github.com/russross/blackfriday/v2" at revision v2.0.1
go: error loading module requirements
```

ãŠãŠã†ã€‚ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã£ãŸã€‚ `github.com/russross/blackfriday/v2` ãªã‚“ã¦ãƒ‘ã‚¹ã¯ã­ãƒ¼ã‚ˆï¼ ã¨ãŠæ€’ã‚Šã®ã‚ˆã†ã ã€‚

ãƒ‘ã‚¹å `gopkg.in/russross/blackfriday.v2` ã¯ `github.com/russross/blackfriday` ã® alias ã§ v2 ã®ã‚³ãƒ¼ãƒ‰ã¯ `v2` ãƒ–ãƒ©ãƒ³ãƒä¸Šã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ã€‚ `v2` ãƒ–ãƒ©ãƒ³ãƒä¸Šã«ã‚ã‚‹ `go.mod` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã¦ã¿ã‚‹ã¨

```text:go.mod
module github.com/russross/blackfriday/v2
```

ã¨è¨˜ã•ã‚Œã¦ã„ã‚‹ãŒï¼Œå®Ÿéš›ã« v2 ãƒ–ãƒ©ãƒ³ãƒã® [`github.com/russross/blackfriday`](https://github.com/russross/blackfriday/tree/v2) ã« `v2` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯å­˜åœ¨ã—ãªã„ã€‚ã“ã®ãƒ‘ã‚¹ã®ä¸ä¸€è‡´ãŒã‚¨ãƒ©ãƒ¼ã®åŸå› ã®ã‚ˆã†ã§ã‚ã‚‹ã€‚

ã“ã®ä¸ä¸€è‡´ã‚’è§£æ¶ˆã™ã‚‹ãŸã‚ã«ã¯ `replace` directive ã‚’è¿½åŠ ã™ã‚‹ã€‚å…·ä½“çš„ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã™ã‚‹ã€‚

```text:go.mod
module md2html

require gopkg.in/russross/blackfriday.v2 latest

replace gopkg.in/russross/blackfriday.v2 latest => github.com/russross/blackfriday/v2 latest
```

ã§ã¯ï¼Œã‚‚ã†ä¸€åº¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«&å®Ÿè¡Œã—ã¦ã¿ã‚ˆã†ã€‚

```
$ go run md2html.go hello.md
go: finding github.com/russross/blackfriday/v2 v2.0.1
go: downloading github.com/russross/blackfriday/v2 v2.0.1
go: finding github.com/shurcooL/sanitized_anchor_name latest
go: downloading github.com/shurcooL/sanitized_anchor_name v0.0.0-20170918181015-86672fcb3f95
<h1>Hello</h1>

<p>Hello, World!</p>
```

ã¨ã„ã†ã‚ã‘ã§ã†ã¾ãå‹•ä½œã—ãŸã‚ˆã†ã ã€‚ã¡ãªã¿ã«æ›¸ãæ›ãˆã‚‰ã‚ŒãŸ `go.mod` ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚

```text:go.mod
module md2html

require (
	github.com/shurcooL/sanitized_anchor_name v0.0.0-20170918181015-86672fcb3f95 // indirect
	gopkg.in/russross/blackfriday.v2 v2.0.1
)

replace gopkg.in/russross/blackfriday.v2 v2.0.1 => github.com/russross/blackfriday/v2 v2.0.1
```

`github.com/shurcooL/sanitized_anchor_name` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ `gopkg.in/russross/blackfriday.v2` å†…ã§ä½¿ç”¨ã•ã‚Œã‚‹ã®ã ãŒï¼Œ `gopkg.in/russross/blackfriday.v2` ã® `go.mod` ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¾å­˜é–¢ä¿‚ã®è¨˜è¿°ãŒãªã„ãŸã‚ `md2html` å´ã«è¨˜è¿°ã•ã‚Œã¦ã—ã¾ã£ãŸã€‚æ®‹å¿µã§ã™ï¼

## GO111MODULE ç’°å¢ƒå¤‰æ•°

ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.11 ã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹ã«ã™ã‚‹ãŸã‚ã«ã¯ç’°å¢ƒå¤‰æ•° `GO111MODULE` ã‚’æŒ‡å®šã™ã‚‹ã€‚ç’°å¢ƒå¤‰æ•° `GO111MODULE` ã«ã¯ä»¥ä¸‹ã®3ã¤ã®å€¤ã‚’æŒ‡å®šã§ãã‚‹ã€‚

- **on** : ã‚³ãƒ¼ãƒ‰ã®ç½®ã‹ã‚Œã¦ã„ã‚‹å ´æ‰€ã«ã‹ã‹ã‚ã‚‰ãšå¸¸ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œã™ã‚‹
- **off** : ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ¢ãƒ¼ãƒ‰ã‚’ç„¡åŠ¹ã¨ã—å¾“æ¥ã® GOPATH ãƒ¢ãƒ¼ãƒ‰ï¼ˆGOPATH modeï¼‰ã§å‹•ä½œã™ã‚‹ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.10 ã¾ã§ã®æŒ™å‹•ã¨åŒç­‰ï¼‰
- **auto** : `$GOPATH/src` ä»¥ä¸‹ã«ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦ã¯å¾“æ¥ã©ãŠã‚Š GOPATH ãƒ¢ãƒ¼ãƒ‰ã§ï¼Œãã‚Œä»¥å¤–ã®å ´æ‰€ã«ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œã™ã‚‹

æ—¢å®šã§ã¯ `auto` ãŒã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ã‚‹ã€‚

## ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ¢ãƒ¼ãƒ‰ with Travis CI

CI (Continuous Integration) ã‚µãƒ¼ãƒ“ã‚¹ã®ã²ã¨ã¤ã§ã‚ã‚‹ [Travis CI] ã¯ [Go è¨€èª]ã«ã‚‚å¯¾å¿œã—ã¦ã„ã‚‹ãŒï¼Œå‡¦ç†å¯¾è±¡ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ `$GOPATH/src` ä»¥ä¸‹ã«å±•é–‹ã™ã‚‹ãŸã‚ GOPATH ãƒ¢ãƒ¼ãƒ‰ã§å‡¦ç†ãŒèµ°ã£ã¦ã—ã¾ã†ã€‚ãã“ã§ .travis.yml ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã¦å¼·å¼•ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ¢ãƒ¼ãƒ‰ã«ã™ã‚‹ã€‚

```yaml:.travis.yml
language: go

go:
  - "1.11.x"

install:
  - env GO111MODULE=on go mod download

script:
  - env GO111MODULE=on go test ./...

after_success:
  - test -n "$TRAVIS_TAG" && curl -sL https://git.io/goreleaser | bash
```

æœ€å¾Œã®è¡Œã®ã‚ˆã†ã« [GoReleaser] ã‚’ä½¿ã£ã¦[è¤‡æ•°ã®å®Ÿè¡Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ“ãƒ«ãƒ‰](http://text.baldanders.info/golang/cross-compiling-in-travis-ci-with-goreleaser/ "Travis CI ã§ã‚¯ãƒ­ã‚¹ãƒ»ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ï¼ˆGoReleaser ç·¨ï¼‰ â€” ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª Go | text.Baldanders.info")ã™ã‚‹å ´åˆã«ã¯ `.goreleaser.yml` ãƒ•ã‚¡ã‚¤ãƒ«ã® `builds` é …ç›®ã«ä»¥ä¸‹ã®è¨˜è¿°ã‚’è¿½åŠ ã™ã‚‹ã€‚

```yaml:.goreleaser.yml
builds:
- env:
  - GO111MODULE=on
```

ã¾ãï¼Œã“ã‚“ãªæ„Ÿã˜ã‹ãªã€‚

## ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯

- [go - The Go Programming Language](https://golang.org/cmd/go/)
- [Go 1.11 ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆï¼ˆå’Œè¨³ï¼‰ - Qiita](https://qiita.com/pokeh/items/c6511ca15c9a33b48fcc)
- [Go 1.11 ã® modulesãƒ»vgo ã‚’è©¦ã™ - å®Ÿéš›ã«ä½¿ã£ã¦ã„ãä¸Šã§è€ƒãˆãªã„ã¨ã„ã‘ãªã„ã“ã¨ #golang | Wantedly Engineer Blog](https://www.wantedly.com/companies/wantedly/post_articles/132270)
- [Go 1.11 ã®ãƒªãƒªãƒ¼ã‚¹ã¨ã€Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€æ©Ÿèƒ½ã®å®Ÿé¨“çš„ã‚µãƒãƒ¼ãƒˆ â€” ãƒªãƒªãƒ¼ã‚¹æƒ…å ± | text.Baldanders.info](http://text.baldanders.info/release/2018/09/go-1_11-ise-released/)
- [Using Go modules with Travis CI | Dave Cheney](https://dave.cheney.net/2018/07/16/using-go-modules-with-travis-ci)


[Go è¨€èª]: https://golang.org/ "The Go Programming Language"
[dep]: https://golang.github.io/dep/ "dep Â· Dependency management for Go"
[Semantic Versioning]: http://semver.org/ "Semantic Versioning 2.0.0 | Semantic Versioning"
[Travis CI]: https://travis-ci.org/ "Travis CI - Test and Deploy Your Code with Confidence"
[GoReleaser]: https://goreleaser.com/ "GoReleaser | Deliver Go binaries as fast and easily as possible"

