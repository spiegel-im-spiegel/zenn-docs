---
title: "ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’ Golang ã® []byte ãƒªãƒ†ãƒ©ãƒ«è¡¨è¨˜ã«å¤‰æ›ã™ã‚‹ç°¡å˜ãªãŠä»•äº‹"
emoji: "ğŸ˜€"
type: "tech"
topics: [Go]
published: false
---
ã“ã‚“ãªã®çµ¶å¯¾èª°ã‹ãŒä½œã£ã¦ã‚‹ã—æ¢ã›ã°è»¢ãŒã£ã¦ã‚‹ã‚“ã ã‚ã†ã‘ã©ã‚°ã‚°ã‚‹ã®ã‚‚é¢å€’ãã•ããªã£ãŸã®ã§è‡ªåˆ†ã§ä½œã‚Šã¾ã—ãŸã€‚

- [spiegel-im-spiegel/godump](https://github.com/spiegel-im-spiegel/godump)

ä»¥ä¸‹ã¯ [README](https://github.com/spiegel-im-spiegel/godump/blob/master/README.md) ã«æ›¸ã„ãŸå†…å®¹ã€‚ã¾ãå®Ÿè³ªã®ã‚³ãƒ¼ãƒ‰ã¯ãŸã£ãŸã“ã‚Œã ã‘ã§

```go
package godump

import (
	"bytes"
	"fmt"
	"io"
)

//DumpBytes returns []bytes literal string
func DumpBytes(r io.Reader, name string) (io.Reader, error) {
	buf := new(bytes.Buffer)
	b := make([]byte, 1)
	var err error
	sep := fmt.Sprintf("var %s = []byte{", name)
	for true {
		if _, err = r.Read(b); err != nil {
			break
		}
		fmt.Fprintf(buf, "%s%#02x", sep, b)
		sep = ", "
	}
	fmt.Fprintln(buf, "}")
	return buf, nil
}
```

å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦èª­ã¿è¾¼ã‚€ä¾¡å€¤ã‚‚ãªã„ã®ã§ï¼Œã‚‚ã—ä½¿ã„ãŸã„ã¨ã„ã†å¥‡ç‰¹ãªæ–¹ãŒãŠã‚‰ã‚Œã‚‹ãªã‚‰ï¼Œä¸­èº«è¦‹ã¦é©å½“ã«ã‚³ãƒ”ãƒšã—ã¦ãã ã•ã„ã€‚

## Install

```
$ go get github.com/spiegel-im-spiegel/godump
```

Installing by [dep].

```
$ dep ensure -add github.com/spiegel-im-spiegel/godump
```

## Usage

```go
dump, err := godump.DumpBytes(bytes.NewBufferString("hello world"), "foobar")
if err != nil {
	return
}
io.Copy(os.Stdout, dump)
// Output:
// var foobar = []byte{0x68, 0x65, 0x6c, 0x6c, 0x6f, 0x20, 0x77, 0x6f, 0x72, 0x6c, 0x64}
```

## Command Line Interface

```
$ godump -h
Usage:
  godump [flags] [binary file]

Flags:
  -h, --help          help for godump
  -n, --name string   value name (default "dumpList")
```

```
$ echo hello world | godump -n foobar
var foobar = []byte{0x68, 0x65, 0x6c, 0x6c, 0x6f, 0x20, 0x77, 0x6f, 0x72, 0x6c, 0x64, 0x0a}
```

```
$ cat input.txt
hello world

$ godump -n foobar input.txt
var foobar = []byte{0x68, 0x65, 0x6c, 0x6c, 0x6f, 0x20, 0x77, 0x6f, 0x72, 0x6c, 0x64}
```

[godump]: https://github.com/spiegel-im-spiegel/godump
[dep]: https://github.com/golang/dep "golang/dep: Go dependency management tool"

