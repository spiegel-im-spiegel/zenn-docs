---
title: "Go ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.16 æ”¹è¨‚ç‰ˆã€‘"
emoji: "ğŸ’»" # ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒã¨ã—ã¦ä½¿ã‚ã‚Œã‚‹çµµæ–‡å­—ï¼ˆ1æ–‡å­—ã ã‘ï¼‰
type: "tech" # "tech" : æŠ€è¡“è¨˜äº‹ / "idea" : ã‚¢ã‚¤ãƒ‡ã‚¢è¨˜äº‹
topics: ["go", "programming"] # ã‚¿ã‚°ã€‚["markdown", "rust", "aws"] ã®ã‚ˆã†ã«æŒ‡å®šã™ã‚‹
published: true # å…¬é–‹è¨­å®šï¼ˆtrue ã§å…¬é–‹ï¼‰
---

[Go] ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã¤ã„ã¦ã¯[è‡ªãƒ–ãƒ­ã‚°](https://text.baldanders.info/golang/ "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª Go | text.Baldanders.info")ã§ã‚‚ã‚ˆãè©±é¡Œã«ã™ã‚‹ã®ã ãŒï¼Œå·®åˆ†æƒ…å ±ãŒå¤šãå†…å®¹ãŒåˆ†æ•£ã—ã¦ã„ã‚‹ãŸã‚ï¼Œã“ã“ã® Zenn ã§ã¾ã¨ã‚ã¦ãŠãã€‚

## ç”¨èªã®æ•´ç†

ã¾ãšæœ€åˆã«ç”¨èªã®å®šç¾©ã‚’ã—ã¦ãŠãã€‚

### GOPATH ãƒ¢ãƒ¼ãƒ‰ã¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ¢ãƒ¼ãƒ‰

ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.11 ä»¥é™ã‹ã‚‰ã¯ [Go] ãƒ„ãƒ¼ãƒ«ãƒ¼ãƒã‚§ãƒ¼ãƒ³ã¯ä»¥ä¸‹ã®2ã¤ã®ãƒ¢ãƒ¼ãƒ‰ã®ã©ã¡ã‚‰ã‹ã§å‹•ä½œã™ã‚‹ã€‚

- **GOPATH ãƒ¢ãƒ¼ãƒ‰ (GOPATH mode)** : ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.10 ã¾ã§ã®å‹•ä½œãƒ¢ãƒ¼ãƒ‰ã€‚æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’é™¤ãå…¨ã¦ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒ¼ãƒ‰ç®¡ç†ã¨ãƒ“ãƒ«ãƒ‰ã‚’ç’°å¢ƒå¤‰æ•° GOPATH ã§æŒ‡å®šã•ã‚ŒãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä¸‹ã§è¡Œã†ã€‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ç®¡ç†ã¯ãƒªãƒã‚¸ãƒˆãƒªã®æœ€æ–°ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã®ã¿ãŒå¯¾è±¡ã¨ãªã‚‹
- **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ¢ãƒ¼ãƒ‰ (module-aware mode)** : æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’é™¤ãå…¨ã¦ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦ç®¡ç†ã™ã‚‹ã€‚ã‚³ãƒ¼ãƒ‰ç®¡ç†ã¨ãƒ“ãƒ«ãƒ‰ã¯ä»»æ„ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å¯èƒ½ã§ï¼Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ãƒªãƒã‚¸ãƒˆãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¿ã‚°ã¾ãŸã¯ãƒªãƒ“ã‚¸ãƒ§ãƒ³æ¯ã«ç®¡ç†ã•ã‚Œã‚‹

### ã€Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ã¨ã¯

ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ¢ãƒ¼ãƒ‰ã§ã¯ï¼Œæ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’é™¤ããƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã€Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆmoduleï¼‰ã€ã¨ã—ã¦ç®¡ç†ã™ã‚‹ã€‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒ [git] ç­‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ„ãƒ¼ãƒ«ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆã¾ãŸã¯ãƒªãƒ“ã‚¸ãƒ§ãƒ³ï¼‰ã”ã¨ã«ç•°ãªã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨è¦‹ãªã•ã‚Œã‚‹ã€‚ã¤ã¾ã‚Šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å®Ÿä½“ã¯ã€Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€ã¨ã„ã†ã“ã¨ã«ãªã‚‹ã€‚
 
ãŸã ã—ã‚³ãƒ¼ãƒ‰ä¸Šã§ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®é–“ã«åŒºåˆ¥ã¯ãªãï¼Œã—ãŸãŒã£ã¦ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãæ›ãˆã‚‹å¿…è¦ã¯ãªã„ã€‚ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã§ã¯ãªã go.mod ãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†ã•ã‚Œã‚‹ã€‚

## ç’°å¢ƒå¤‰æ•° GO111MODULE ã«ã‚ˆã‚‹ãƒ¢ãƒ¼ãƒ‰ã®åˆ‡ã‚Šæ›¿ãˆ

ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.11 ä»¥é™ã§ã¯2ã¤ã®ãƒ¢ãƒ¼ãƒ‰ã®åˆ‡ã‚Šæ›¿ãˆã®ãŸã‚ã«ç’°å¢ƒå¤‰æ•° GO111MODULE ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚

```
$ go env | grep GO111MODULE
GO111MODULE=""
```

GO111MODULE ã®å–ã‚Šã†ã‚‹å€¤ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚

| å€¤     | å†…å®¹ |
| ------ | ---- |
| `on`   | å¸¸ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œã™ã‚‹ |
| `off`  | å¸¸ã« GOPATH ãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œã™ã‚‹  |
| `auto` | `$GOPATH/src` ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã•ã‚Œ `go.mod` ã‚’å«ã¾ãªã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ GOPATH ãƒ¢ãƒ¼ãƒ‰ã§ï¼Œãã‚Œä»¥å¤–ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¯¾å¿œãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œã™ã‚‹ |

ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.16 ã‹ã‚‰ GO111MODULE æœªæŒ‡å®šæ™‚ã®æ—¢å®šå€¤ãŒ `on` ã«ãªã£ãŸï¼ˆ1.15 ã¾ã§ã¯ `auto`ï¼‰ã€‚ GOPATH ãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ã„ãŸã„ã®ã§ã‚ã‚Œã° GO111MODULE ã®å€¤ã‚’ `auto` ã¾ãŸã¯ `off` ã«è¨­å®šã™ã‚‹[^env1]ã€‚

[^env1]: [Go] ã®ç’°å¢ƒå¤‰æ•°ã®å–ã‚Šæ‰±ã„ã«ã¤ã„ã¦ã¯ï¼Œæ‹™æ–‡ã€Œ[Go è¨€èªã®ç’°å¢ƒå¤‰æ•°ç®¡ç†](https://text.baldanders.info/golang/go-env/)ã€ã‚’ã”è¦§ã‚ã‚Œã€‚

```
$ go env -w GO111MODULE=auto
```

ãŸã ã— [Go] ã§ã¯ç’°å¢ƒå¤‰æ•° GOPATH ã¸ã®ä¾å­˜ã‚’å¾ã€…ã«è–„ã‚ã¤ã¤ã‚ã‚Šï¼Œæœ€çµ‚çš„ã«ã¯ $GOPATH/bin ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥å¤–ã¯ä½¿ã‚ã‚Œãªããªã‚‹ã¨æ€ã‚ã‚Œã‚‹ã€‚

https://zenn.dev/tennashi/articles/3b87a8d924bc9c43573e

## go.mod ã¨ go.sum

### go.mod ã®ä½œæˆ

ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ç®¡ç†ã¯ go.mod ãŠã‚ˆã³ go.sum ãƒ•ã‚¡ã‚¤ãƒ«ã§è¡Œã†ã€‚æ–°ãŸã« go.mod ã‚’ä½œæˆã™ã‚‹å ´åˆã¯ï¼Œä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å©ãã€‚

```
$ go mod init hello
go: creating new go.mod: module hello
go: to add module requirements and sums:
	go mod tidy
```

ã“ã‚Œã§ã‚«ãƒ¬ãƒ³ãƒˆãƒ»ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç›´ä¸‹ã« go.mod ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã‚‹ã€‚ä¸­èº«ã¯ã“ã‚“ãªæ„Ÿã˜ã€‚

```txt:go.mod
module hello

go 1.16
```

è¡Œé ­ã® `module` ã‚„ `go` ã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ï¼ˆdirectiveï¼‰ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã ã€‚ãŸã¨ãˆã° `module hello` ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åãŒ `hello` ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã™ã€‚

ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã¯ä»»æ„ã«ä»˜ã‘ã‚‰ã‚Œã‚‹ãŒã‚½ãƒ¼ã‚¹ãƒ»ã‚³ãƒ¼ãƒ‰ã® `import` ã§æŒ‡å®šã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ‘ã‚¹ã«åˆã‚ã›ã‚‹ã®ãŒç„¡é›£ã§ã‚ã‚‹ã€‚ãŸã¨ãˆã° [github.com/spiegel-im-spiegel/fetch](https://github.com/spiegel-im-spiegel/fetch) ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚ã‚Œã°

```txt:go.mod
module github.com/spiegel-im-spiegel/fetch
```

ã¨ã™ã‚‹ã€‚

ä»–ã« go.mod ãƒ•ã‚¡ã‚¤ãƒ«ã§ä½¿ãˆã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚

| ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ– | è¨˜è¿°ä¾‹                                          | å†…å®¹                   |
| -------------- | ----------------------------------------------- | ---------------------- |
| `module`       | `module my/thing`                               | ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å           |
| `go`           | `1.16`                                          | æœ‰åŠ¹ãª Go ãƒãƒ¼ã‚¸ãƒ§ãƒ³   |
| `require`      | `require other/thing v1.0.2`                    | ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« |
| `exclude`      | `exclude old/thing v1.2.3`                      | é™¤å¤–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«         |
| `replace`      | `replace bad/thing v1.4.5 => good/thing v1.4.5` | ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ç½®æ›       |
| `retract`      | `v1.0.5`                                        | æ’¤å›ãƒãƒ¼ã‚¸ãƒ§ãƒ³         |

`replace` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚ã‚‹ãƒªãƒã‚¸ãƒˆãƒªãŒãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã¦ã„ã¦ä¸Šæ‰‹ãã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ããªã„ç­‰ã®çŠ¶æ³ã§ä½¿ãˆã‚‹ã€‚ãŸã¨ãˆã°ã“ã‚“ãªæ„Ÿã˜ã€‚

```txt:go.mod
module sample

require gopkg.in/russross/blackfriday.v2 v2.0.1

replace gopkg.in/russross/blackfriday.v2 v2.0.1 => github.com/russross/blackfriday/v2 v2.0.1
```

`retract` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.16 ã‹ã‚‰å°å…¥ã•ã‚ŒãŸã‚‚ã®ã§

```txt:go.mod
// Remote-triggered crash in package foo. See CVE-2021-01234.
retract v1.0.5
```

ãªã©ã¨ã‚³ãƒ¡ãƒ³ãƒˆã¨å…±ã«æŒ‡å®šã—ã¦ãŠãã¨

```
$ go list -m -u all
example.com/lib v1.0.0 (retracted)
$ go get .
go: warning: example.com/lib@v1.0.5: retracted by module author:
    Remote-triggered crash in package foo. See CVE-2021-01234.
go: to switch to the latest unretracted version, run:
    go get example.com/lib@latest
```

ã¦ãªæ„Ÿã˜ã«ã‚³ãƒ¡ãƒ³ãƒˆã®å†…å®¹ã§ãƒ¯ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’å‡ºã—ã¦ãã‚Œã‚‹ã‚‰ã—ã„ã€‚

### go.sum ã®ä¸­èº«

go.sum ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒãƒƒã‚·ãƒ¥æƒ…å ±ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã€‚ãŸã¨ãˆã° go.mod ãƒ•ã‚¡ã‚¤ãƒ«ã§ `require` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ãŒ

```txt:go.mod
require github.com/spiegel-im-spiegel/errs v1.0.2
```

ã¨æŒ‡å®šã•ã‚Œã¦ã„ã‚‹å ´åˆï¼Œ go.sum ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã¯

```txt:go.sum
github.com/spiegel-im-spiegel/errs v1.0.2 h1:v4amEwRDqRWjKHOILQnJSovYhZ4ZttEnBBXNXEzS6Sc=
github.com/spiegel-im-spiegel/errs v1.0.2/go.mod h1:UoasJYYujMcdkbT9USv8dfZWoMyaY3btqQxoLJImw0A=
```

ã¨ã„ã£ãŸæ„Ÿã˜ã«ãªã‚‹ã€‚

go.sum ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã¯ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å®Œå…¨æ€§ï¼ˆintegrityï¼‰ã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã ãŒï¼Œæ‰‹ä½œæ¥­ã§è¨˜è¿°ã§ãã‚‹ã‚ˆã†ãªã‚‚ã®ã§ã¯ãªã„ã®ã§ï¼Œæ¬¡ã«ç´¹ä»‹ã™ã‚‹ go mod tidy ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦æ›´æ–°ã™ã‚‹ã€‚

### go mod tidy ã«ã‚ˆã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æƒ…å ±ã®æ›´æ–°

[Go] ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.15 ã¾ã§ã¯ go build ã‚„ go test ã¨ã„ã£ãŸã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œæ™‚ã« go.mod ãŠã‚ˆã³ go.sum ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ›´æ–°ã•ã‚Œã¦ã„ãŸãŒï¼Œ 1.16 ã‹ã‚‰ã¯ã“ã‚ŒãŒã§ããªããªã£ãŸã€‚ãŸã¨ãˆã°ï¼Œã‚½ãƒ¼ã‚¹ãƒ»ã‚³ãƒ¼ãƒ‰ä¸Šã§æ–°ã—ã„å¤–éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ import ã—ã¦ã‚‚ go.mod ã¨ go.sum ã«è¨˜è¿°ãŒãªã„ã¨

```
$ go test ./...
main.go:9:2: no required module provides package github.com/spiegel-im-spiegel/cov19jpn/chart; to add it:
	go get github.com/spiegel-im-spiegel/cov19jpn/chart
```

ã¨ã‹

```
$ go test ./...
go: github.com/spiegel-im-spiegel/cov19jpn@v0.2.0: missing go.sum entry; to add it:
	go mod download github.com/spiegel-im-spiegel/cov19jpn
```

ã¿ãŸã„ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã‚Šã™ã‚‹ã€‚ go.mod ãŠã‚ˆã³ go.sum ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã„ã„æ„Ÿã˜ã«æ›´æ–°ã—ãŸã„ã®ã§ã‚ã‚Œã°

```text
$ go mod tidy
```

ã¨ã™ã‚‹ã¨ã‚ˆã„ã€‚

## [Semantic Versioning] ã«ã‚ˆã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ã¯ãƒªãƒã‚¸ãƒˆãƒªã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ç•ªå·ã¾ãŸã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¿ã‚°ã«ã‚ˆã£ã¦ç®¡ç†ã•ã‚Œã‚‹ãŒï¼Œãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¿ã‚°ã«é–¢ã—ã¦ã¯ [Semantic Versioning] ã®ãƒ«ãƒ¼ãƒ«ã«å‰‡ã£ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã‚‹ã€‚

[![research.swtch.com/impver.png](https://research.swtch.com/impver.png)](https://research.swtch.com/vgo-import "via â€œSemantic Import Versioningâ€")

ã“ã®ã‚ˆã†ã«å¾Œæ–¹äº’æ›æ€§ã®ãªã„å¤‰æ›´ãŒã‚ã‚‹å ´åˆã«ã¯ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ï¼Œå¾Œæ–¹äº’æ›æ€§ãŒæ‹…ä¿ã•ã‚ŒãŸå¤‰æ›´ã‚„è¿½åŠ ã«ã¤ã„ã¦ã¯ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ï¼Œä¸å…·åˆã‚„è„†å¼±æ€§ã®ä¿®æ­£ã«ã¤ã„ã¦ã¯ç¬¬3ä½ã®ãƒ‘ãƒƒãƒãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¸Šã’ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚ã¾ãŸãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¸Šã’ã‚‹éš›ã«ã¯ï¼Œå›³ã®ã‚ˆã†ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ†é›¢ã™ã‚‹ã‹ï¼Œ go.mod ãƒ•ã‚¡ã‚¤ãƒ«ã® `module` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã®å€¤ã‚’å¤‰æ›´ã™ã‚‹ã®ãŒç°¡å˜ã§ã‚ã‚‹[^ver1]ã€‚

[^ver1]: v0 ã‹ã‚‰ v1 ã¸ã®ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã®å ´åˆã¯ä¾‹å¤–çš„ã«å¾Œæ–¹äº’æ›æ€§ã¯è€ƒæ…®ã•ã‚Œãªã„ã€‚ v0 ã¯ãƒ™ãƒ¼ã‚¿ç‰ˆã¨ã„ã†æ‰±ã„ã‚‰ã—ã„ã€‚ãã‚Œä»¥å¤–ã®ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã®éš›ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ‘ã‚¹ã¾ãŸã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã§åŒºåˆ¥ã›ãšã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¿ã‚°ã‚’æ‰“ã¤ã¨å¼·åˆ¶çš„ã« `v2.0.0+incompatible` ã¿ãŸã„ãªã‚·ãƒ§ãƒœã„è¡¨è¨˜ã«ã•ã‚Œã‚‹ã€‚

ä»¥ä¸‹ã¯ [github.com/mattn/jvgrep](https://github.com/mattn/jvgrep) ã®ä¾‹ï¼š

```txt:go.mod
module github.com/mattn/jvgrep/v5
```

## ç‰¹å®šãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ“ãƒ«ãƒ‰&ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.16 ã‹ã‚‰ go install ã‚³ãƒãƒ³ãƒ‰ã§ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«@ãƒãƒ¼ã‚¸ãƒ§ãƒ³ ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

```text
$ go install golang.org/x/tools/gopls@v0.6.5
```

ã¨ã«ã‹ãæœ€æ–°ç‰ˆãŒæ¬²ã—ã„å ´åˆã¯

```text
$ go install golang.org/x/tools/gopls@latest
go: downloading golang.org/x/tools/gopls v0.6.5
...
```

ãªã©ã¨ã™ã‚Œã°OKã€‚

ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä»˜ãã§æŒ‡å®šã™ã‚‹éš›ã¯ï¼Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ»ãƒ‘ã‚¹ã§ã¯ãªããƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã§æŒ‡å®šã™ã‚‹ç‚¹ã«æ³¨æ„ã€‚ãŸã¨ãˆã°ï¼Œå…ˆã»ã©ã® [github.com/mattn/jvgrep](https://github.com/mattn/jvgrep) ã®å ´åˆï¼Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ»ãƒ‘ã‚¹ã§æŒ‡å®šã—ã¦ã‚‚

```
$ go install github.com/mattn/jvgrep@latest
go: downloading github.com/mattn/jvgrep v1.9.0
go: downloading github.com/mattn/jvgrep v5.8.1+incompatible
...
```

ã¦ãªæ„Ÿã˜ã§ `latest` ã‚’æŒ‡å®šã—ã¦ã‚‚æœ€æ–°ç‰ˆã‚’å–ã£ã¦ãã‚Œãªã„ã€‚ã“ã†ã„ã†ã¨ãã¯

```
$ go install github.com/mattn/jvgrep/v5@latest
go: downloading github.com/mattn/jvgrep/v5 v5.8.9
...
```

ã¨ã™ã‚Œã°ç„¡å•é¡Œã§ã‚ã‚‹ã€‚

ãªãŠï¼Œãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.16 ã§ã¯ go.mod ãƒ•ã‚¡ã‚¤ãƒ«ã« `replace` ã‚„ `exclude` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã¨ go install ã«å¤±æ•—ã™ã‚‹ã€‚

```
$ go install github.com/spiegel-im-spiegel/gnkf@latest
go: downloading github.com/spiegel-im-spiegel/gnkf v0.3.0
go install github.com/spiegel-im-spiegel/gnkf@latest: github.com/spiegel-im-spiegel/gnkf@v0.3.0
	The go.mod file for the module providing named packages contains one or
	more replace directives. It must not contain directives that would cause
	it to be interpreted differently than if it were the main module.
```

ã¨ã»ã» orz

ã“ã†ã„ã†ã¨ãã¯ go install ã§ã¯ãªã go get ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ãˆã°å–ã‚Šæ•¢ãˆãšå¤§ä¸ˆå¤«ãªã‚ˆã†ã ã€‚

```
$ go get github.com/spiegel-im-spiegel/gnkf@latest
```

ãŸã ã— go get ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ãŸãƒ“ãƒ«ãƒ‰&ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯å°†æ¥ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§å»ƒæ­¢ã•ã‚Œã‚‹ã‚‰ã—ã„ã®ã§ï¼Œä½•ã¨ã‹ã—ãªãã‚ƒãªã...

## å‚è€ƒ

https://blog.golang.org/go116-module-changes

[Go]: https://golang.org/ "The Go Programming Language"
[git]: https://git-scm.com/ "Git"
[Semantic Versioning]: http://semver.org/ "Semantic Versioning 2.0.0 | Semantic Versioning"
[GitHub]: https://github.com/
